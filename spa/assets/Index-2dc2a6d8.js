import{g as T,c as L}from"./tencent-8d06993a.js";import{T as C}from"./index-d1b92e96.js";import{e as $,y as M,o,c,g as m,w as N,F as v,$ as S,d as y,J as V,t as k,L as r,x as A,_ as z,f as B}from"../main.js";import"./useConfigInject-64b7b171.js";import"./index-7e0f7233.js";import"./index-530bf57a.js";import"./omit-8f673a04.js";import"./index-99998ff4.js";const j={class:"container"},D={class:"value"},F={key:0,class:"mono m5"},O={key:0,style:{color:"red"}},R={key:1,style:{color:"green"}},W={key:1,style:{display:"flex","justify-content":"center"}},q={key:0,class:"red-half"},J={key:1,class:"red-whole"},K={key:2,class:"green-half"},P={key:3,class:"green-whole"},G=$({__name:"StockTable",props:{dataSource:Array},setup(w){const l=M([...w.dataSource]);l.forEach(t=>{t.ts_code=(t.ts_code.startsWith("5")?"sh":"sz")+t.ts_code});const i=["m15","m30","m60","m120","day","week"];async function g(){for(const t of l){const a=await Promise.all([...i,"m5"].map(d=>T(t.ts_code,d))),s=a.slice(-1)[0],[n,p]=s.slice(-2),e={marketMap:{},factors:{total:0},m5market:s,m5prev:n,m5latest:p};i.forEach((d,x)=>{const f=e.marketMap[d]=a[x],E=(U,I=1)=>{const u=f.slice(-1)[0];return u.close>u.bbi_raw?I:u.close<u.bbi_raw?-I:0};e.factors[d]=E(f,["m15","week"].includes(d)?.5:1),e.factors.total+=e.factors[d],d==="day"&&(e.dayLatest=f.slice(-1)[0],e.dayLatest.open_pct_chg=L(e.dayLatest.open,f.slice(-2)[0].close),e.dayLatest.pct_chg=L(e.dayLatest.close,f.slice(-2)[0].close))}),Object.assign(t,e)}console.log(l)}const _=[{title:"",dataIndex:"index",customRender:({text:t,record:a,index:s,column:n})=>s+1},{title:"name",dataIndex:"name",width:120},{title:"ts_code",dataIndex:"ts_code",width:100},{title:"factors",dataIndex:["factors","total"],sorter:(t,a)=>{var s;if(((s=t.factors)==null?void 0:s.total)!=null){if(t.factors.total>a.factors.total)return 1;if(t.factors.total<a.factors.total)return-1}return 0},defaultSortOrder:"descend",align:"center",width:60}];return i.forEach((t,a)=>{_.push({title:t,dataIndex:["factors",t],align:"center",width:60})}),_.push({title:"开",dataIndex:["dayLatest","open_pct_chg"],align:"right"}),_.push({title:"收",dataIndex:["dayLatest","pct_chg"],align:"right"}),_.push({title:"",dataIndex:"placeholder"}),g(),(t,a)=>(o(),c("div",j,[m(A(C),{dataSource:l,size:"small",columns:_,pagination:!1,rowKey:"title",style:{"margin-bottom":"20px"}},{bodyCell:N(({column:s,record:n,text:p,value:e,index:d})=>[e&&s.dataIndex.includes("factors")?(o(),c(v,{key:0},[s.dataIndex.includes("total")?(o(),c("div",{key:0,class:"factors-total",style:S({color:e>0?"red":"green","font-weight":Math.abs(e)*200-100})},[y("span",D,[V(k(Math.abs(e))+" ",1),n.m5latest?(o(),c("span",F,[n.m5latest.close>n.m5latest.bbi_raw?(o(),c("span",O,k(n.m5prev.close>n.m5prev.bbi_raw?"↑":"⬆︎"),1)):(o(),c("span",R,"↓"))])):r("",!0)])],4)):(o(),c("div",W,[e===.5?(o(),c("span",q)):r("",!0),e===1?(o(),c("span",J)):r("",!0),e===-.5?(o(),c("span",K)):r("",!0),e===-1?(o(),c("span",P)):r("",!0)]))],64)):r("",!0),e&&(s.dataIndex.includes("pct_chg")||s.dataIndex.includes("open_pct_chg"))?(o(),c("div",{key:1,class:"mono",style:S({color:e>0?"red":"green"})},k(e),5)):r("",!0)]),_:1},8,["dataSource"])]))}});const h=z(G,[["__scopeId","data-v-7d9f949f"]]),H={style:{display:"flex","flex-direction":"column","align-items":"flex-start"}},Q=["href"],ce=$({__name:"Index",setup(w){const b=[{ts_code:"510210",name:"综指"},{ts_code:"510050",name:"上证50"},{ts_code:"512880",name:"证券"},{ts_code:"560050",name:"msciA50"},{ts_code:"159915",name:"创"},{ts_code:"515790",name:"光伏"},{ts_code:"515030",name:"新能车"},{ts_code:"512480",name:"半导体"},{ts_code:"512100",name:"中证1000"}],l=[{ts_code:"510880",name:"红利"},{ts_code:"512890",name:"红利低波"},{ts_code:"515220",name:"煤炭"},{ts_code:"512800",name:"银行"},{ts_code:"517180",name:"中国国企"},{ts_code:"515450",name:"红利低波50"},{ts_code:"159930",name:"能源"}],i=[{ts_code:"511380",name:"可转债"},{ts_code:"513050",name:"中概互联"},{ts_code:"513090",name:"香港证券"},{ts_code:"513120",name:"创新药"},{ts_code:"513310",name:"中韩半导体"},{ts_code:"513360",name:"教育"},{ts_code:"513690",name:"恒生股息"},{ts_code:"159920",name:"恒生"},{ts_code:"159981",name:"能源化工"}],g=[{ts_code:"513290",name:"纳指生物科技"},{ts_code:"513520",name:"日经"},{ts_code:"518880",name:"黄金"},{ts_code:"159509",name:"纳指科技"},{ts_code:"159941",name:"纳指"},{ts_code:"159985",name:"豆粕"},{ts_code:"162411",name:"华宝油气"},{ts_code:"164824",name:"印度基金"}],_=[{ts_code:"508001",name:"沪杭甬"},{ts_code:"508006",name:"首创水务"},{ts_code:"508008",name:"中国铁建"},{ts_code:"508009",name:"安徽交控"},{ts_code:"508018",name:"中国交建"},{ts_code:"508021",name:"临港创新"},{ts_code:"508028",name:"国家电投"},{ts_code:"508058",name:"厦门安居"},{ts_code:"508066",name:"江苏交控"},{ts_code:"508068",name:"北京保障房"},{ts_code:"508099",name:"中关村"},{ts_code:"180101",name:"蛇口产业院"},{ts_code:"180102",name:"合肥高新"},{ts_code:"180201",name:"广州广河"},{ts_code:"180301",name:"盐田港"},{ts_code:"180401",name:"深圳能源"}];let t=B("");return T("sh000001","day",2e3).then(a=>{console.log(a);const s="20240129",n=a.findIndex(x=>x.datetime===s),p=a[n-5+1],e=a[n-3+1],d=a[n+1];console.log(s,p.datetime,e.datetime),t.value=`https://www.iwencai.com/unifiedwap/result?w=${p.datetime}-${s}区间涨跌幅，成交额>1千万，${e.datetime}-${s}区间涨跌幅，${d.datetime}涨跌幅&querytype=fund`}),(a,s)=>(o(),c(v,null,[y("div",H,[m(h,{"data-source":b},null,8,["data-source"]),m(h,{"data-source":l},null,8,["data-source"]),m(h,{"data-source":_}),m(h,{"data-source":i},null,8,["data-source"]),m(h,{"data-source":g},null,8,["data-source"])]),y("div",null,[y("a",{href:A(t),target:"_blank"},"问",8,Q)])],64))}});export{ce as default};
